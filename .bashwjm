#!/bin/bash
# modified from https://gist.github.com/atduskgreg/1691176
PS1="\[\033[01;35m\]\u\[\033[00m\]@\[\033[01;38m\]\$(uname -n):\[\033[00m\]\[\033[01;32m\]\w\[\033[01;33m\]\$(parse_git_branch)\$(parse_git_dirty)\[\033[00m\]$ "
 
parse_git_branch() {
  if [[ $(git rev-parse --show-toplevel 2>/dev/null) != $HOME ]]; then
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/'
  fi
}
 
parse_git_dirty() {
  TOP=$(git rev-parse --show-toplevel 2>/dev/null)
  if [[ -d .git ]] && [[ TOP != $HOME ]] && [[ $TOP != "$HOME/projects/gcc" ]]; then
    CLEAN=$(git status | tail -n1)
    [[ $CLEAN != "nothing to commit (working directory clean)" ]] && [[ $CLEAN != "nothing to commit, working directory clean" ]] && echo "*"
  fi
}

ldf() {
    pdflatex ${1%tex}tex 2>/dev/null </dev/null && nohup evince ${1%tex}pdf &>/dev/null
}

export EDITOR=$(which vim)

# aliases
alias ls='ls --color=auto'
